<%= stylesheet_link_tag 'global/stylesheet' %>
<%= stylesheet_link_tag 'usuarios/usuarios' %>

<div class="usuarios-page">
  <div class="return">
    <%= link_to "← Voltar ao Início", root_path %>
  </div>

  <div class="usuarios-container">
    <h1>Lista de Usuários</h1>
    
    <div class="usuarios-header">
      <%= link_to "Novo Usuário", new_admin_user_path, class: "new-user-button" %>
    </div>

    <div class="usuarios-search">
      <input 
        type="text" 
        id="user-search" 
        placeholder="Buscar por email..." 
      />
    </div>

    <div class="usuarios-table-wrapper">
      <table class="usuarios-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Email</th>
            <th>Criado em</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <% @users.each do |user| %>
            <tr>
              <td><%= user.id %></td>
              <td><%= user.email %></td>
              <td><%= user.created_at.strftime("%d/%m/%Y") %></td>
              <td class="actions-cell">
                <%= link_to "Editar", edit_admin_user_path(user), class: "action-link edit-link" %>
                <%= link_to "Excluir", admin_user_path(user), method: :delete, 
                    confirm: "Tem certeza?", class: "action-link delete-link" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <% if @total_pages && @total_pages > 1 %>
      <div class="usuarios-pagination">
        <% current_page = @current_page || 1 %>
        <%= link_to "Anterior", admin_users_path(page: current_page - 1), 
            class: "pagination-button #{current_page <= 1 ? 'disabled' : ''}",
            disabled: current_page <= 1 %>
        
        <span>
          Página <%= current_page %> de <%= @total_pages %>
        </span>
        
        <%= link_to "Próxima", admin_users_path(page: current_page + 1), 
            class: "pagination-button #{current_page >= (@total_pages || 1) ? 'disabled' : ''}",
            disabled: current_page >= (@total_pages || 1) %>
      </div>
    <% end %>
  </div>
</div>